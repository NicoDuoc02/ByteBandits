DROP TABLE VENTA;
DROP TABLE CLIENTE;
DROP TABLE VEHICULO;
DROP TABLE MODELO;
DROP TABLE MARCA;
DROP TABLE FORMA_PAGO;
DROP TABLE VENDEDOR;
DROP TABLE COLOR;
DROP TABLE ESTADO_VEHICULO;
DROP TABLE TIPO_VEHICULO;
DROP TABLE PAIS_ORIGEN;

--CREATE TABLES 

CREATE TABLE FORMA_PAGO(
ID_FORMA_PAGO VARCHAR2 (10) NOT NULL,
NOMBRE_FORMA_PAGO VARCHAR2 (50) NOT NULL);

ALTER TABLE FORMA_PAGO 
      ADD CONSTRAINT FORMA_PAGO_PK PRIMARY KEY (ID_FORMA_PAGO);
     
CREATE TABLE PAIS_ORIGEN(
ID_PAIS_ORIGEN NUMBER (2) NOT NULL,
NOMBRE_PAIS_ORIGEN VARCHAR2 (50) NOT NULL);

ALTER TABLE PAIS_ORIGEN 
      ADD CONSTRAINT PAIS_ORIGEN_PK PRIMARY KEY (ID_PAIS_ORIGEN);
      
CREATE TABLE TIPO_VEHICULO(
ID_TIPO_VEHICULO NUMBER (4) NOT NULL,
NOMBRE_TIPO_VEHICULO VARCHAR2 (30) NOT NULL);

ALTER TABLE TIPO_VEHICULO 
      ADD CONSTRAINT TIPO_VEHICULO_PK PRIMARY KEY (ID_TIPO_VEHICULO);

CREATE TABLE MARCA(
ID_MARCA NUMBER (6) NOT NULL,
NOMBRE_MARCA VARCHAR2 (30) NOT NULL,
ID_PAIS_ORIGEN NUMBER (2) );

ALTER TABLE MARCA
      ADD CONSTRAINT MARCA_PK PRIMARY KEY (ID_MARCA);
      
ALTER TABLE MARCA
     ADD CONSTRAINT ID_PAIS_ORIGEN_FK FOREIGN KEY (ID_PAIS_ORIGEN) REFERENCES PAIS_ORIGEN (ID_PAIS_ORIGEN); 

CREATE TABLE MODELO(
ID_MODELO VARCHAR2 (4) NOT NULL,
NOMBRE_MODELO VARCHAR2 (30) NOT NULL,
ID_MARCA NUMBER (6),
ID_TIPO_VEHICULO NUMBER (4));

ALTER TABLE MODELO
      ADD CONSTRAINT MODELO_PK PRIMARY KEY (ID_MODELO);
      
ALTER TABLE MODELO
     ADD CONSTRAINT ID_MARCA_FK FOREIGN KEY (ID_MARCA) REFERENCES MARCA (ID_MARCA); 

ALTER TABLE MODELO
     ADD CONSTRAINT ID_TIPO_VEHICULO FOREIGN KEY (ID_TIPO_VEHICULO) REFERENCES TIPO_VEHICULO (ID_TIPO_VEHICULO);
     
CREATE TABLE ESTADO_VEHICULO(
ID_ESTADO_VEHICULO NUMBER (2) NOT NULL,
NOMBRE_ESTADO_VEHICULO VARCHAR2 (20) NOT NULL);

ALTER TABLE ESTADO_VEHICULO
      ADD CONSTRAINT ESTADO_VEHICULO_PK PRIMARY KEY (ID_ESTADO_VEHICULO);
      
CREATE TABLE COLOR(
ID_COLOR NUMBER (4) NOT NULL,
NOMBRE_COLOR VARCHAR2 (30) NOT NULL);

ALTER TABLE COLOR
      ADD CONSTRAINT COLOR_PK PRIMARY KEY (ID_COLOR);
      
CREATE TABLE VEHICULO(
PATENTE VARCHAR2 (6) NOT NULL,
ID_MODELO VARCHAR2 (4) ,
ANIO DATE NOT NULL,
ID_COLOR NUMBER (4) , 
PRECIO NUMBER (10) NOT NULL,
FECHA_INGRESO DATE NOT NULL,
ID_ESTADO_VEHICULO NUMBER (2)
);

ALTER TABLE VEHICULO
      ADD CONSTRAINT VEHICULO_PK PRIMARY KEY (PATENTE);
      
ALTER TABLE VEHICULO
     ADD CONSTRAINT ID_MODELO_FK FOREIGN KEY (ID_MODELO) REFERENCES MODELO (ID_MODELO);  
     
ALTER TABLE VEHICULO
     ADD CONSTRAINT ID_COLOR_FK FOREIGN KEY (ID_COLOR) REFERENCES COLOR (ID_COLOR);
     
ALTER TABLE VEHICULO
     ADD CONSTRAINT ID_ESTADO_VEHICULO FOREIGN KEY (ID_ESTADO_VEHICULO) REFERENCES ESTADO_VEHICULO (ID_ESTADO_VEHICULO);

      
CREATE TABLE CLIENTE(
RUT_CLIENTE NUMBER (8) NOT NULL,
DV_CLIENTE CHAR(1)NOT NULL,
NOMBRE_CLIENTE VARCHAR2 (100) NOT NULL,
APP_PATERNO VARCHAR2 (50) NOT NULL,
APP_MATERNO VARCHAR2 (50) NOT NULL,
DIRECCION_CLIENTE VARCHAR2 (50) NOT NULL,
NUMERO_DIRECCION VARCHAR2 (10) NOT NULL,
ID_COMUNA NUMBER(5),
CELULAR NUMBER (9) NOT NULL,
EMAIL VARCHAR2 (100));

ALTER TABLE CLIENTE 
      ADD CONSTRAINT CLIENTE_PK PRIMARY KEY (RUT_CLIENTE);
      
ALTER TABLE CLIENTE
     ADD CONSTRAINT ID_COMUNA_FK FOREIGN KEY (ID_COMUNA) REFERENCES COMUNA (ID_COMUNA);   

CREATE TABLE VENDEDOR(
RUT_VENDEDOR NUMBER (8) NOT NULL,
DV_VENDEDOR CHAR(1)NOT NULL,
NOMBRE_VENDEDOR VARCHAR2 (100) NOT NULL,
APP_PATERNO VARCHAR2 (50) NOT NULL,
APP_MATERNO VARCHAR2 (50) NOT NULL,
CELULAR NUMBER (9) NOT NULL,
EMAIL VARCHAR2 (100));

ALTER TABLE VENDEDOR
      ADD CONSTRAINT VENDEDOR_PK PRIMARY KEY (RUT_VENDEDOR);


CREATE TABLE VENTA(
ID_VENTA NUMBER(10) NOT NULL,
RUT_CLIENTE NUMBER (8) NOT NULL,
RUT_VENDEDOR NUMBER (8) NOT NULL,
PATENTE VARCHAR2 (6) NOT NULL,
FECHA_VENTA DATE NOT NULL,
PRECIO_VENTA NUMBER(10) NOT NULL,
ID_FORMA_PAGO VARCHAR2 (10) NOT NULL);

ALTER TABLE VENTA
      ADD CONSTRAINT VENTA_PK PRIMARY KEY (ID_VENTA);
      
ALTER TABLE VENTA
     ADD CONSTRAINT RUT_CLIENTE_FK FOREIGN KEY (RUT_CLIENTE) REFERENCES CLIENTE (RUT_CLIENTE); 
     
ALTER TABLE VENTA
     ADD CONSTRAINT RUT_VENDEDOR_FK FOREIGN KEY (RUT_VENDEDOR) REFERENCES VENDEDOR (RUT_VENDEDOR);
     
ALTER TABLE VENTA
     ADD CONSTRAINT PATENTE_FK FOREIGN KEY (PATENTE) REFERENCES VEHICULO (PATENTE);
     
ALTER TABLE VENTA
     ADD CONSTRAINT ID_FORMA_PAGO_FK FOREIGN KEY (ID_FORMA_PAGO) REFERENCES FORMA_PAGO (ID_FORMA_PAGO);

-- INSERT TABLAS

-- Inserts para PAIS_ORIGEN
INSERT INTO PAIS_ORIGEN (ID_PAIS_ORIGEN, NOMBRE_PAIS_ORIGEN) VALUES (1, 'México');
INSERT INTO PAIS_ORIGEN (ID_PAIS_ORIGEN, NOMBRE_PAIS_ORIGEN) VALUES (2, 'Estados Unidos');
INSERT INTO PAIS_ORIGEN (ID_PAIS_ORIGEN, NOMBRE_PAIS_ORIGEN) VALUES (3, 'Japón');
INSERT INTO PAIS_ORIGEN (ID_PAIS_ORIGEN, NOMBRE_PAIS_ORIGEN) VALUES (4, 'Alemania');

-- Inserts para TIPO_VEHICULO
INSERT INTO TIPO_VEHICULO (ID_TIPO_VEHICULO, NOMBRE_TIPO_VEHICULO) VALUES (100, 'Sedán');
INSERT INTO TIPO_VEHICULO (ID_TIPO_VEHICULO, NOMBRE_TIPO_VEHICULO) VALUES (200, 'SUV');
INSERT INTO TIPO_VEHICULO (ID_TIPO_VEHICULO, NOMBRE_TIPO_VEHICULO) VALUES (300, 'Camioneta');
INSERT INTO TIPO_VEHICULO (ID_TIPO_VEHICULO, NOMBRE_TIPO_VEHICULO) VALUES (400, 'Motocicleta');

-- Inserts para MARCA
INSERT INTO MARCA (ID_MARCA, NOMBRE_MARCA, ID_PAIS_ORIGEN) VALUES (1000, 'Toyota', 3);
INSERT INTO MARCA (ID_MARCA, NOMBRE_MARCA, ID_PAIS_ORIGEN) VALUES (2000, 'Ford', 2);
INSERT INTO MARCA (ID_MARCA, NOMBRE_MARCA, ID_PAIS_ORIGEN) VALUES (3000, 'BMW', 4);
INSERT INTO MARCA (ID_MARCA, NOMBRE_MARCA, ID_PAIS_ORIGEN) VALUES (4000, 'Nissan', 3);

-- Inserts para MODELO
INSERT INTO MODELO (ID_MODELO, NOMBRE_MODELO, ID_MARCA, ID_TIPO_VEHICULO) VALUES ('M001', 'Corolla', 1000, 100);
INSERT INTO MODELO (ID_MODELO, NOMBRE_MODELO, ID_MARCA, ID_TIPO_VEHICULO) VALUES ('M002', 'Explorer', 2000, 200);
INSERT INTO MODELO (ID_MODELO, NOMBRE_MODELO, ID_MARCA, ID_TIPO_VEHICULO) VALUES ('M003', 'X5', 3000, 200);
INSERT INTO MODELO (ID_MODELO, NOMBRE_MODELO, ID_MARCA, ID_TIPO_VEHICULO) VALUES ('M004', 'Frontier', 4000, 300);

-- Inserts para ESTADO_VEHICULO
INSERT INTO ESTADO_VEHICULO (ID_ESTADO_VEHICULO, NOMBRE_ESTADO_VEHICULO) VALUES (1, 'Nuevo');
INSERT INTO ESTADO_VEHICULO (ID_ESTADO_VEHICULO, NOMBRE_ESTADO_VEHICULO) VALUES (2, 'Usado');
INSERT INTO ESTADO_VEHICULO (ID_ESTADO_VEHICULO, NOMBRE_ESTADO_VEHICULO) VALUES (3, 'En reparación');
INSERT INTO ESTADO_VEHICULO (ID_ESTADO_VEHICULO, NOMBRE_ESTADO_VEHICULO) VALUES (4, 'Descontinuado');

INSERT INTO COLOR (ID_COLOR, NOMBRE_COLOR) VALUES (1001, 'Rojo');
INSERT INTO COLOR (ID_COLOR, NOMBRE_COLOR) VALUES (1002, 'Negro');
INSERT INTO COLOR (ID_COLOR, NOMBRE_COLOR) VALUES (1003, 'Blanco');
INSERT INTO COLOR (ID_COLOR, NOMBRE_COLOR) VALUES (1004, 'Azul metálico');

INSERT INTO VEHICULO (PATENTE, ID_MODELO, ANIO, ID_COLOR, PRECIO, FECHA_INGRESO, ID_ESTADO_VEHICULO)
VALUES ('ABCD12', 'M001', TO_DATE('2022-01-01', 'YYYY-MM-DD'), 1001, 250000, TO_DATE('2024-05-01', 'YYYY-MM-DD'), 1);

INSERT INTO VEHICULO (PATENTE, ID_MODELO, ANIO, ID_COLOR, PRECIO, FECHA_INGRESO, ID_ESTADO_VEHICULO)
VALUES ('FGHI34', 'M002', TO_DATE('2020-01-01', 'YYYY-MM-DD'), 1002, 180000, TO_DATE('2023-10-10', 'YYYY-MM-DD'), 2);

INSERT INTO VEHICULO (PATENTE, ID_MODELO, ANIO, ID_COLOR, PRECIO, FECHA_INGRESO, ID_ESTADO_VEHICULO)
VALUES ('JKLM56', 'M003', TO_DATE('2021-01-01', 'YYYY-MM-DD'), 1003, 320000, TO_DATE('2024-02-15', 'YYYY-MM-DD'), 3);

INSERT INTO VEHICULO (PATENTE, ID_MODELO, ANIO, ID_COLOR, PRECIO, FECHA_INGRESO, ID_ESTADO_VEHICULO)
VALUES ('NOPQ78', 'M004', TO_DATE('2019-01-01', 'YYYY-MM-DD'), 1004, 150000, TO_DATE('2023-08-20', 'YYYY-MM-DD'), 4);